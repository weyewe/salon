$(document).ready(function(){
 
	
		<% new_form = escape_javascript(  render :partial => "compatibilities/new_object_form", :locals => {
	    :new_object => @compatibility , 
			:url => update_compatibility_url(@service_component, @compatibility) 
	  })%>
 
	$("#editEntry .modal-body").append('<%= new_form %>');
	
	jQuery('.prevent_double_submit').preventDoubleSubmit();
	
	var search_item_url = '<%= search_item_url %>'; 
	var $search_item_box = $("#search_item_id");
  $search_item_box.tokenInput( search_item_url , {
		propertyToSearch: "name",
		tokenLimit: 1, 
		onAdd: function (item) {

		} ,
		onDelete: function(item){
		},
		zindex: 9999,
		prePopulate:   	[
			<% if not @compatibility.item_id.nil? %> 
				{id: <%= @compatibility.item_id  %>, name: '<%= @compatibility.item.name %>'}
			<% end %>
		]
	});
});